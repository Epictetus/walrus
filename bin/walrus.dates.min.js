/**
 * Walrus.js 0.6.2
 * (c) 2012 Jeremy Ruppel
 * Walrus.js is freely distributable under the terms of the MIT license.
 * https://raw.github.com/jeremyruppel/walrus/master/LICENSE
 */
((function(){var a,b,c,d,e,f;e=typeof require!="undefined"&&require!==null&&typeof exports!="undefined"&&exports!==null?require("./walrus"):window.Walrus,c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],d=["January","February","March","April","May","June","July","August","September","October","November","December"],b=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],f=function(a){var b;return b=new Date(a),isNaN(b.getMilliseconds())?Date(a.split(/[-\s:]/)):b},e.addFilter("strftime",function(e,g){var h,i,j=this;return h=f(e),i=function(a,b,c){return b==null&&(b=2),c==null&&(c="0"),(""+a).length<b?i(""+c+a,b,c):a},g.replace(/%(.)/g,function(e){switch(e){case"%a":return a[h.getDay()];case"%A":return c[h.getDay()];case"%b":return b[h.getMonth()];case"%B":return d[h.getMonth()];case"%D":return j.strftime(h,"%m/%d/%y");case"%d":return i(h.getDate());case"%e":return h.getDate();case"%F":return j.strftime(h,"%Y-%m-%d");case"%H":return i(h.getHours());case"%I":return h.getHours()>12?i(h.getHours()-12):i(h.getHours());case"%k":return h.getHours();case"%l":return h.getHours()>12?h.getHours()-12:h.getHours();case"%M":return i(h.getMinutes());case"%m":return i(h.getMonth()+1);case"%n":return"\n";case"%p":return h.getHours()>12?"PM":"AM";case"%R":return j.strftime(h,"%H:%M");case"%r":return j.strftime(h,"%I:%M:%S %p");case"%S":return i(h.getSeconds());case"%T":return j.strftime(h,"%H:%M:%S");case"%t":return"\t";case"%u":return h.getDay()||7;case"%v":return j.strftime(h,"%e-%b-%Y");case"%w":return h.getDay();case"%X":return h.toTimeString();case"%x":return h.toDateString();case"%Y":return h.getFullYear();case"%y":return h.getFullYear().toString().slice(-2);case"%Z":return h.toString().match(/\((\w+)\)/)[1]||""}})}),e.Utils.isLeapYear=function(a){return(new Date(a,1,29)).getDate()===29},e.Utils.leapYearsBetween=function(a,b){var c,d;if(a>b)return 0;c=0;for(d=a;a<=b?d<=b:d>=b;a<=b?d++:d--)this.isLeapYear(d)&&c++;return c},e.Utils.distanceOfTimeInWords=function(a,b,c){var d,g,h,i,j,k,l,m,n,o,p,q;b==null&&(b=0),c==null&&(c=!1),j=f(a),p=f(b),d=(p-j)/1e3,g=Math.round(Math.abs(d)/60),h=Math.round(Math.abs(d));switch(!1){case!(0<=g&&g<=1):if(!c)return g===0?"less than a minute":"1 minute";switch(!1){case!(0<=h&&h<=4):return"less than 5 seconds";case!(5<=h&&h<=9):return"less than 10 seconds";case!(10<=h&&h<=19):return"less than 20 seconds";case!(20<=h&&h<=39):return"half a minute";case!(40<=h&&h<=59):return"less than a minute";default:return"1 minute"}break;case!(2<=g&&g<=44):return""+g+" minutes";case!(45<=g&&g<=89):return"about 1 hour";case!(90<=g&&g<=1439):return"about "+Math.round(g/60)+" hours";case!(1440<=g&&g<=2519):return"1 day";case!(2520<=g&&g<=43199):return""+Math.round(g/1440)+" days";case!(43200<=g&&g<=86399):return"about 1 month";case!(86400<=g&&g<=525599):return""+Math.round(g/43200)+" months";default:return k=j.getFullYear(),j.getMonth()>=2&&(k+=1),q=p.getFullYear(),p.getMonth()<2&&(q-=1),l=e.Utils.leapYearsBetween(k,q),m=l*1440,n=g-m,o=n%525600,i=Math.floor(n/525600),o<131400?"about "+i+" "+(i===1?"year":"years"):o<394200?"over "+i+" "+(i===1?"year":"years"):"almost "+(i+1)+" years"}},e.addFilter("time_ago_in_words",function(a,b){return e.Utils.distanceOfTimeInWords(a,new Date,b)})})).call(this)